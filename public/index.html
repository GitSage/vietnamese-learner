<html>
<head>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
    <script src='src/word-repository.js'></script>
    <script>
        let words;
        document.addEventListener("DOMContentLoaded", () => {
            let wordsSelect = document.querySelector('#words');

            getAllWords().then((result) => {
                words = result;

               for(let i = 0; i < words.length; i++) {
                   let option = document.createElement('option');
                   option.text = words[i].english;
                   option.value = ''+i;
                   wordsSelect.add(option);
               }
            });
            document.querySelector('#words');
        });

        function play() {
            let wordsSelect = document.querySelector('#words');
            let index = wordsSelect.options[wordsSelect.selectedIndex].value;
            let fileName = words[index].fileName;
            new Audio(`audio/${fileName}`).play();
        }

        function downloadWord() {
            addWord(document.querySelector('#newWordEnglish').value, document.querySelector('#newWordVietnamese').value,).then(() => {
                console.log('Success');
            });
        }

    </script>
</head>
<body>
    <select title="Words" id="words"></select>
    <button onclick="play()">Play</button>

    <div style="outline: black 1px">
        <label for="newWordEnglish">English</label>
        <input id="newWordEnglish" value="hello" />
        <label for="newWordVietnamese">Vietnamese</label>
        <input id="newWordVietnamese" value="xin chÃ o"/>
        <button onclick="downloadWord()">Download</button>
    </div>
</body>
</html>